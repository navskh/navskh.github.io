---
layout: post
title: 2022 수시 입시박람회 (입학상담앱) Review
subtitle : PWA
tags: [Mobile, PWA, Flutter]
author: Young
comments : True
---

# 입시상담앱 관련 이슈
## 버전 이슈 : PWA 로 진행

문제점 : 기존 Cordova를 사용하여 App을 만들었을 때,
iOS 15버전 이상의 경우 앱이 동작하지 못하는 경우를 발견하게 되었다.

#### Vuejs + PWA

우리의 처음 목표는 Vue + PWA 로 진행하였음.
완료된 사항은 다음과 같다.

OpenSource로 구현 
- 상담앱 관리자 
- 상담앱 Backend 


Front 부분을 하다가 시간이 촉박하게 되어 결국 Cordova에 PWA를 입혀서 작업을 진행하였음.

#### Cordova + PWA
이렇게 하였을 때, 앱처럼 정상 작동하는 것을 보게 되었다.

###### 해결된 문제는 다음과 같다.
- 모달창이 뜨는 경우 터치가 되지 않아 모두 페이지로 바꾸었음 (경쟁률, 고등학교 검색, 이메일, 관리자 입력)
- iOS의 경우 PWA를 사파리에서만 지원하게 됨에 따라, 사파리에서 지원하지 못하는 WEBSQL을 IndexedDB로 바꾸게 되었음.
- IndexedDB를 가져올 때, Promise를 사용하여 await, async를 사용하여 데이터를 가져오게 되었음.
- 안드로이드의 경우, PDF를 url로 불러오면 계속 다운로드 받아지는 이슈가 있어 PDF 뷰어를 만들어 보여지게 만들었음. 
- 위의 문제를 제외하고 여러 문제가 있었으나 주된 문제는 위 사항정도로 정리.

###### 여전히 나타나는 문제점은 다음과 같다.
- 오프라인 환경일 때, 이미지/PDF/페이지들을 가져오지 못하는 현상 (간헐적으로 발생)
- iOS 10버전 이하의 경우 앱이 동작하지 않음 (사파리 버전에 따른 ES6 문법 이슈)
- 서비스워커의 버전을 올려도 Fetch가 제대로 되지 않는 이슈 발생 (항상 앱 설정에 가서 캐시를 지우고 받아줬어야 했음)

###### 위 문제의 해결 가능 여부
- 깊게 공부한다고 될 문제인가.
- 이대로 한번더(정시때)는 사용할 수 있을것인가.

###### (그 외...) 앞으로 Flutter의 방향으로 했으면 좋겠는 이유
- 일단 유웨이에서 되는데 진학사에서 안된다는 이야기를 더 이상 듣고 싶지 않음. 싹 갈아엎어서라도 네이티브 앱에서 동작하는 기능들을 여럿 만들고 싶음.
- 웹앱의 경우, 각 브라우저, 각 기기의 이슈들을 모두 생각해야해서 디버깅하기가 너무 힘들었음. 
